# ===========================================
# Server Configuration
# ===========================================
# Server port configuration with environment variable override support
# Cloud Run 会设置 PORT 环境变量，默认使用 8080
server.port=${PORT:8080}
# Server address - must be 0.0.0.0 for Cloud Run to access the container
server.address=0.0.0.0

# ===========================================
# Database Connection Configuration (R2DBC - Reactive Database Connection)
# ===========================================
# PostgreSQL database connection URL with environment variable override support
spring.r2dbc.url=${DB_URL:r2dbc:postgresql://localhost:5432/social_insurance}
# Database username with environment variable override support
spring.r2dbc.username=${DB_USER:db_user}
# Database password with environment variable override support
spring.r2dbc.password=${DB_PASSWORD:local}

# R2DBC Connection Pool Configuration
spring.r2dbc.pool.enabled=true
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=10
spring.r2dbc.pool.max-idle-time=30m
spring.r2dbc.pool.max-acquire-time=30s
spring.r2dbc.pool.max-create-connection-time=30s
spring.r2dbc.pool.validation-query=SELECT 1

# R2DBC Connection Timeout Configuration
spring.r2dbc.properties.connectTimeout=10
spring.r2dbc.properties.socketTimeout=30

# ===========================================
# Flyway Configuration - Disabled
# ===========================================
# Flyway is handled by a separate migration service
# Explicitly disable Flyway to prevent auto-configuration
spring.flyway.enabled=false